{% extends "base_privada.html" %}
{% from "macros/form_fields.html" import field with context %}

{% block titulo %}Cadastrar Endereço{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8 mx-auto">
        <!-- Cabeçalho -->
        <div class="mb-4">
            <h2 class="fw-bold" style="color: #3D3D3D;">
                <i class="bi bi-geo-alt-fill me-2" style="color: #E67E4A;"></i>Novo Endereço
            </h2>
            <p class="text-muted mb-0">Adicione um endereço de entrega</p>
        </div>

        <!-- Formulário de Cadastro -->
        <div class="card shadow-sm" style="border: 1px solid rgba(230, 126, 74, 0.2); border-radius: 15px;">
            <form action="/usuario/endereco/cadastrar" method="post">
                {{ csrf_input() }}
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-12">
                            {% include "components/alerta_erro.html" %}
                        </div>

                        <div class="col-12 mb-3">
                            {{ field(name='titulo', label='Título do Endereço', type='text', required=true,
                            value=dados.titulo, placeholder='Ex: Casa, Trabalho, etc.',
                            attributes={'minlength': 1, 'maxlength': 50}) }}
                        </div>

                        <div class="col-md-8 mb-3">
                            {{ field(name='logradouro', label='Logradouro', type='text', required=true,
                            value=dados.logradouro, placeholder='Rua, Avenida, etc.',
                            attributes={'minlength': 3, 'maxlength': 100}) }}
                        </div>

                        <div class="col-md-4 mb-3">
                            {{ field(name='numero', label='Número', type='text', required=true,
                            value=dados.numero, placeholder='123',
                            attributes={'maxlength': 10}) }}
                        </div>

                        <div class="col-12 mb-3">
                            {{ field(name='complemento', label='Complemento', type='text',
                            value=dados.complemento, placeholder='Apto, Bloco, etc. (opcional)') }}
                        </div>

                        <div class="col-md-6 mb-3">
                            {{ field(name='bairro', label='Bairro', type='text', required=true,
                            value=dados.bairro, placeholder='Nome do bairro',
                            attributes={'minlength': 2, 'maxlength': 50}) }}
                        </div>

                        <div class="col-md-6 mb-3">
                            {{ field(name='cidade', label='Cidade', type='text', required=true,
                            value=dados.cidade, placeholder='Nome da cidade',
                            attributes={'minlength': 2, 'maxlength': 50}) }}
                        </div>

                        <div class="col-md-4 mb-3">
                            {{ field(name='uf', label='UF', type='select', required=true,
                            value=dados.uf, options={
                                'AC': 'AC', 'AL': 'AL', 'AP': 'AP', 'AM': 'AM',
                                'BA': 'BA', 'CE': 'CE', 'DF': 'DF', 'ES': 'ES',
                                'GO': 'GO', 'MA': 'MA', 'MT': 'MT', 'MS': 'MS',
                                'MG': 'MG', 'PA': 'PA', 'PB': 'PB', 'PR': 'PR',
                                'PE': 'PE', 'PI': 'PI', 'RJ': 'RJ', 'RN': 'RN',
                                'RS': 'RS', 'RO': 'RO', 'RR': 'RR', 'SC': 'SC',
                                'SP': 'SP', 'SE': 'SE', 'TO': 'TO'
                            }) }}
                        </div>

                        <div class="col-md-8 mb-3">
                            {{ field(name='cep', label='CEP', type='text', required=true,
                            value=dados.cep, placeholder='00000-000', mask='00000-000') }}
                        </div>
                    </div>
                </div>
                <div class="card-footer p-4 bg-transparent border-top" style="border-top: 1px solid rgba(230, 126, 74, 0.1) !important;">
                    <div class="d-flex gap-3">
                        <button type="submit" class="btn btn-gradient-primary fw-semibold">
                            <i class="bi bi-check-circle me-2"></i>Cadastrar Endereço
                        </button>
                        <a href="/usuario/perfil/visualizar" class="btn btn-outline-secondary fw-semibold">
                            <i class="bi bi-x-circle me-2"></i>Cancelar
                        </a>
                    </div>
                </div>
            </form>
        </div>

        <!-- Aviso -->
        <div class="alert-care alert-care-success mt-4" role="alert">
            <i class="bi bi-lightbulb me-2"></i>
            <strong>Dica:</strong> Você pode cadastrar apenas um endereço, que será usado como endereço de entrega.
        </div>
    </div>
</div>
{% endblock %}
